2025-11-16T00:02:50.027+01:00  INFO 69184 --- [supplychainx] [main] c.e.s.t.OrderControllerIntegrationTest   : Starting OrderControllerIntegrationTest using Java 24.0.1 with PID 69184 (started by Youcode in C:\Users\Youcode\Desktop\supplychainx)
2025-11-16T00:02:50.035+01:00  INFO 69184 --- [supplychainx] [main] c.e.s.t.OrderControllerIntegrationTest   : The following 1 profile is active: "test"
2025-11-16T00:02:52.162+01:00  INFO 69184 --- [supplychainx] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-16T00:02:52.358+01:00  INFO 69184 --- [supplychainx] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 174 ms. Found 11 JPA repository interfaces.
2025-11-16T00:02:53.677+01:00  INFO 69184 --- [supplychainx] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-16T00:02:53.777+01:00  INFO 69184 --- [supplychainx] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-16T00:02:53.851+01:00  INFO 69184 --- [supplychainx] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-16T00:02:54.262+01:00  INFO 69184 --- [supplychainx] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-16T00:02:54.302+01:00  INFO 69184 --- [supplychainx] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-16T00:02:54.553+01:00  INFO 69184 --- [supplychainx] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@73a1a1b4
2025-11-16T00:02:54.555+01:00  INFO 69184 --- [supplychainx] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-16T00:02:54.678+01:00  INFO 69184 --- [supplychainx] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 16.11
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-16T00:02:56.788+01:00  INFO 69184 --- [supplychainx] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-16T00:02:57.040+01:00  INFO 69184 --- [supplychainx] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-16T00:02:57.829+01:00  INFO 69184 --- [supplychainx] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-16T00:02:59.919+01:00  WARN 69184 --- [supplychainx] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-16T00:03:00.991+01:00  INFO 69184 --- [supplychainx] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-16T00:03:00.992+01:00  INFO 69184 --- [supplychainx] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-16T00:03:00.994+01:00  INFO 69184 --- [supplychainx] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-11-16T00:03:01.050+01:00  INFO 69184 --- [supplychainx] [main] c.e.s.t.OrderControllerIntegrationTest   : Started OrderControllerIntegrationTest in 11.972 seconds (process running for 19.619)
2025-11-16T00:03:02.132+01:00  INFO 69184 --- [supplychainx] [main] c.e.supplychainx.aspects.AuthAspect      : Authentification réussie. Rôle stocké dans AuthContext: ADMIN
2025-11-16T00:03:02.804+01:00  INFO 69184 --- [supplychainx] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-16T00:03:02.832+01:00  WARN 69184 --- [supplychainx] [SpringApplicationShutdownHook] com.zaxxer.hikari.pool.ProxyConnection   : HikariPool-1 - Connection org.postgresql.jdbc.PgConnection@73a1a1b4 marked as broken because of SQLSTATE(08006), ErrorCode(0)

org.postgresql.util.PSQLException: Une erreur d'entrée/sortie a eu lieu lors d'envoi vers le serveur.
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:399) ~[postgresql-42.7.8.jar:42.7.8]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:525) ~[postgresql-42.7.8.jar:42.7.8]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435) ~[postgresql-42.7.8.jar:42.7.8]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357) ~[postgresql-42.7.8.jar:42.7.8]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342) ~[postgresql-42.7.8.jar:42.7.8]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318) ~[postgresql-42.7.8.jar:42.7.8]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313) ~[postgresql-42.7.8.jar:42.7.8]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95) ~[HikariCP-6.3.3.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-6.3.3.jar:na]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80) ~[hibernate-core-6.6.33.Final.jar:6.6.33.Final]
	at org.hibernate.tool.schema.internal.SchemaDropperImpl$DelayedDropActionImpl.perform(SchemaDropperImpl.java:628) ~[hibernate-core-6.6.33.Final.jar:6.6.33.Final]
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryClosing(SessionFactoryObserverForSchemaExport.java:48) ~[hibernate-core-6.6.33.Final.jar:6.6.33.Final]
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryClosing(SessionFactoryObserverChain.java:48) ~[hibernate-core-6.6.33.Final.jar:6.6.33.Final]
	at org.hibernate.internal.SessionFactoryImpl.close(SessionFactoryImpl.java:928) ~[hibernate-core-6.6.33.Final.jar:6.6.33.Final]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:565) ~[na:na]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.invokeProxyMethod(AbstractEntityManagerFactoryBean.java:529) ~[spring-orm-6.2.12.jar:6.2.12]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean$ManagedEntityManagerFactoryInvocationHandler.invoke(AbstractEntityManagerFactoryBean.java:750) ~[spring-orm-6.2.12.jar:6.2.12]
	at jdk.proxy2/jdk.proxy2.$Proxy152.close(Unknown Source) ~[na:na]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.destroy(AbstractEntityManagerFactoryBean.java:662) ~[spring-orm-6.2.12.jar:6.2.12]
	at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:212) ~[spring-beans-6.2.12.jar:6.2.12]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:798) ~[spring-beans-6.2.12.jar:6.2.12]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:748) ~[spring-beans-6.2.12.jar:6.2.12]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingleton(DefaultListableBeanFactory.java:1499) ~[spring-beans-6.2.12.jar:6.2.12]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:707) ~[spring-beans-6.2.12.jar:6.2.12]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingletons(DefaultListableBeanFactory.java:1492) ~[spring-beans-6.2.12.jar:6.2.12]
	at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1222) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1183) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1129) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147) ~[spring-boot-3.5.7.jar:3.5.7]
	at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116) ~[spring-boot-3.5.7.jar:3.5.7]
	at java.base/java.lang.Thread.run(Thread.java:1447) ~[na:na]
Caused by: java.net.SocketException: Une connexion établie a été abandonnée par un logiciel de votre ordinateur hôte
	at java.base/sun.nio.ch.SocketDispatcher.read0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:46) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.tryRead(NioSocketImpl.java:255) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:306) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:345) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:790) ~[na:na]
	at java.base/java.net.Socket$SocketInputStream.implRead(Socket.java:983) ~[na:na]
	at java.base/java.net.Socket$SocketInputStream.read(Socket.java:970) ~[na:na]
	at org.postgresql.core.VisibleBufferedInputStream.readMore(VisibleBufferedInputStream.java:192) ~[postgresql-42.7.8.jar:42.7.8]
	at org.postgresql.core.VisibleBufferedInputStream.ensureBytes(VisibleBufferedInputStream.java:159) ~[postgresql-42.7.8.jar:42.7.8]
	at org.postgresql.core.VisibleBufferedInputStream.ensureBytes(VisibleBufferedInputStream.java:144) ~[postgresql-42.7.8.jar:42.7.8]
	at org.postgresql.core.VisibleBufferedInputStream.read(VisibleBufferedInputStream.java:76) ~[postgresql-42.7.8.jar:42.7.8]
	at org.postgresql.core.PGStream.receiveChar(PGStream.java:477) ~[postgresql-42.7.8.jar:42.7.8]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2175) ~[postgresql-42.7.8.jar:42.7.8]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372) ~[postgresql-42.7.8.jar:42.7.8]
	... 32 common frames omitted

2025-11-16T00:03:02.852+01:00 ERROR 69184 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: set client_min_messages = WARNING
2025-11-16T00:03:02.853+01:00 ERROR 69184 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: alter table if exists bill_of_material drop constraint if exists FKh3mapit7kch8jgnqhnmikdi96
2025-11-16T00:03:02.854+01:00 ERROR 69184 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: alter table if exists bill_of_material drop constraint if exists FKdildw5cr0jshwl1aapiigmaox
2025-11-16T00:03:02.854+01:00 ERROR 69184 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: alter table if exists customer_order drop constraint if exists FKf9abd30bhiqvugayxlpq8ryq9
2025-11-16T00:03:02.855+01:00 ERROR 69184 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: alter table if exists customer_order drop constraint if exists FKqodal2jjysnj6lsn46nvndcwr
2025-11-16T00:03:02.855+01:00 ERROR 69184 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: alter table if exists delivery drop constraint if exists FKejhj32q2h5614nx7scc41chql
2025-11-16T00:03:02.855+01:00 ERROR 69184 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: alter table if exists production_order drop constraint if exists FKkc38iyv9ioqhjwcdlrmfpecq3
2025-11-16T00:03:02.855+01:00 ERROR 69184 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: alter table if exists supplier_rawmaterial drop constraint if exists FKa1op2oq2gkuegitpjrb1dq1m
2025-11-16T00:03:02.856+01:00 ERROR 69184 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: alter table if exists supplier_rawmaterial drop constraint if exists FKmaapu5kf0vvskvcgffrjo9ilm
2025-11-16T00:03:02.856+01:00 ERROR 69184 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: alter table if exists supply_order_item drop constraint if exists FKam4tdmpi11f8i3v2b7jpou06y
2025-11-16T00:03:02.857+01:00 ERROR 69184 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: alter table if exists supply_order_item drop constraint if exists FKblu21960wpuoktwjnplsehd88
2025-11-16T00:03:02.858+01:00 ERROR 69184 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: alter table if exists supply_order drop constraint if exists FKhu1dkipx6f8w155arxs8uncv8
2025-11-16T00:03:02.858+01:00 ERROR 69184 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: drop table if exists bill_of_material cascade
2025-11-16T00:03:02.858+01:00 ERROR 69184 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: drop table if exists customer cascade
2025-11-16T00:03:02.859+01:00 ERROR 69184 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: drop table if exists customer_order cascade
2025-11-16T00:03:02.860+01:00 ERROR 69184 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: drop table if exists delivery cascade
2025-11-16T00:03:02.861+01:00 ERROR 69184 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: drop table if exists product cascade
2025-11-16T00:03:02.861+01:00 ERROR 69184 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: drop table if exists production_order cascade
2025-11-16T00:03:02.861+01:00 ERROR 69184 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: drop table if exists raw_material cascade
2025-11-16T00:03:02.862+01:00 ERROR 69184 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: drop table if exists supplier cascade
2025-11-16T00:03:02.862+01:00 ERROR 69184 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: drop table if exists supplier_rawmaterial cascade
2025-11-16T00:03:02.863+01:00 ERROR 69184 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: drop table if exists supply_order_item cascade
2025-11-16T00:03:02.863+01:00 ERROR 69184 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: drop table if exists supply_order cascade
2025-11-16T00:03:02.863+01:00 ERROR 69184 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: drop table if exists users cascade
2025-11-16T00:03:02.867+01:00  INFO 69184 --- [supplychainx] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-16T00:03:02.877+01:00  INFO 69184 --- [supplychainx] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-16T00:03:42.158+01:00  INFO 83960 --- [supplychainx] [main] c.e.s.t.OrderControllerIntegrationTest   : Starting OrderControllerIntegrationTest using Java 24.0.1 with PID 83960 (started by Youcode in C:\Users\Youcode\Desktop\supplychainx)
2025-11-16T00:03:42.163+01:00  INFO 83960 --- [supplychainx] [main] c.e.s.t.OrderControllerIntegrationTest   : The following 1 profile is active: "test"
2025-11-16T00:03:44.454+01:00  INFO 83960 --- [supplychainx] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-16T00:03:44.775+01:00  INFO 83960 --- [supplychainx] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 289 ms. Found 11 JPA repository interfaces.
2025-11-16T00:03:46.779+01:00  INFO 83960 --- [supplychainx] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-16T00:03:46.965+01:00  INFO 83960 --- [supplychainx] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-16T00:03:47.087+01:00  INFO 83960 --- [supplychainx] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-16T00:03:47.522+01:00  INFO 83960 --- [supplychainx] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-16T00:03:47.579+01:00  INFO 83960 --- [supplychainx] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-16T00:03:47.872+01:00  INFO 83960 --- [supplychainx] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1764e45e
2025-11-16T00:03:47.874+01:00  INFO 83960 --- [supplychainx] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-16T00:03:47.973+01:00  INFO 83960 --- [supplychainx] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 16.11
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-16T00:03:49.783+01:00  INFO 83960 --- [supplychainx] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-16T00:03:50.012+01:00  INFO 83960 --- [supplychainx] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-16T00:03:50.753+01:00  INFO 83960 --- [supplychainx] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-16T00:03:52.631+01:00  WARN 83960 --- [supplychainx] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-16T00:03:53.591+01:00  INFO 83960 --- [supplychainx] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-16T00:03:53.591+01:00  INFO 83960 --- [supplychainx] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-16T00:03:53.593+01:00  INFO 83960 --- [supplychainx] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-11-16T00:03:53.644+01:00  INFO 83960 --- [supplychainx] [main] c.e.s.t.OrderControllerIntegrationTest   : Started OrderControllerIntegrationTest in 12.556 seconds (process running for 24.85)
2025-11-16T00:03:54.570+01:00  INFO 83960 --- [supplychainx] [main] c.e.supplychainx.aspects.AuthAspect      : Authentification réussie. Rôle stocké dans AuthContext: ADMIN
2025-11-16T00:03:54.955+01:00  INFO 83960 --- [supplychainx] [main] c.e.supplychainx.aspects.AuthAspect      : Authentification réussie. Rôle stocké dans AuthContext: GESTIONNAIRE_COMMERCIAL
2025-11-16T00:03:55.167+01:00  INFO 83960 --- [supplychainx] [main] c.e.supplychainx.aspects.AuthAspect      : Authentification réussie. Rôle stocké dans AuthContext: GESTIONNAIRE_COMMERCIAL
2025-11-16T00:03:55.290+01:00  INFO 83960 --- [supplychainx] [main] c.e.supplychainx.aspects.AuthAspect      : Authentification réussie. Rôle stocké dans AuthContext: ADMIN
2025-11-16T00:03:55.423+01:00  INFO 83960 --- [supplychainx] [main] c.e.supplychainx.aspects.AuthAspect      : Authentification réussie. Rôle stocké dans AuthContext: SUPERVISEUR_LIVRAISONS
2025-11-16T00:03:55.581+01:00  INFO 83960 --- [supplychainx] [main] c.e.supplychainx.aspects.AuthAspect      : Authentification réussie. Rôle stocké dans AuthContext: GESTIONNAIRE_COMMERCIAL
2025-11-16T00:03:55.753+01:00  INFO 83960 --- [supplychainx] [main] c.e.supplychainx.aspects.AuthAspect      : Authentification réussie. Rôle stocké dans AuthContext: ADMIN
2025-11-16T00:03:56.274+01:00  INFO 83960 --- [supplychainx] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-16T00:03:56.287+01:00  WARN 83960 --- [supplychainx] [SpringApplicationShutdownHook] com.zaxxer.hikari.pool.ProxyConnection   : HikariPool-1 - Connection org.postgresql.jdbc.PgConnection@1764e45e marked as broken because of SQLSTATE(08006), ErrorCode(0)

org.postgresql.util.PSQLException: Une erreur d'entrée/sortie a eu lieu lors d'envoi vers le serveur.
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:399) ~[postgresql-42.7.8.jar:42.7.8]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:525) ~[postgresql-42.7.8.jar:42.7.8]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435) ~[postgresql-42.7.8.jar:42.7.8]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357) ~[postgresql-42.7.8.jar:42.7.8]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342) ~[postgresql-42.7.8.jar:42.7.8]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318) ~[postgresql-42.7.8.jar:42.7.8]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313) ~[postgresql-42.7.8.jar:42.7.8]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95) ~[HikariCP-6.3.3.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-6.3.3.jar:na]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80) ~[hibernate-core-6.6.33.Final.jar:6.6.33.Final]
	at org.hibernate.tool.schema.internal.SchemaDropperImpl$DelayedDropActionImpl.perform(SchemaDropperImpl.java:628) ~[hibernate-core-6.6.33.Final.jar:6.6.33.Final]
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryClosing(SessionFactoryObserverForSchemaExport.java:48) ~[hibernate-core-6.6.33.Final.jar:6.6.33.Final]
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryClosing(SessionFactoryObserverChain.java:48) ~[hibernate-core-6.6.33.Final.jar:6.6.33.Final]
	at org.hibernate.internal.SessionFactoryImpl.close(SessionFactoryImpl.java:928) ~[hibernate-core-6.6.33.Final.jar:6.6.33.Final]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:565) ~[na:na]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.invokeProxyMethod(AbstractEntityManagerFactoryBean.java:529) ~[spring-orm-6.2.12.jar:6.2.12]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean$ManagedEntityManagerFactoryInvocationHandler.invoke(AbstractEntityManagerFactoryBean.java:750) ~[spring-orm-6.2.12.jar:6.2.12]
	at jdk.proxy2/jdk.proxy2.$Proxy152.close(Unknown Source) ~[na:na]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.destroy(AbstractEntityManagerFactoryBean.java:662) ~[spring-orm-6.2.12.jar:6.2.12]
	at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:212) ~[spring-beans-6.2.12.jar:6.2.12]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:798) ~[spring-beans-6.2.12.jar:6.2.12]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:748) ~[spring-beans-6.2.12.jar:6.2.12]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingleton(DefaultListableBeanFactory.java:1499) ~[spring-beans-6.2.12.jar:6.2.12]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:707) ~[spring-beans-6.2.12.jar:6.2.12]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingletons(DefaultListableBeanFactory.java:1492) ~[spring-beans-6.2.12.jar:6.2.12]
	at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1222) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1183) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1129) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147) ~[spring-boot-3.5.7.jar:3.5.7]
	at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116) ~[spring-boot-3.5.7.jar:3.5.7]
	at java.base/java.lang.Thread.run(Thread.java:1447) ~[na:na]
Caused by: java.net.SocketException: Une connexion établie a été abandonnée par un logiciel de votre ordinateur hôte
	at java.base/sun.nio.ch.SocketDispatcher.read0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:46) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.tryRead(NioSocketImpl.java:255) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:306) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:345) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:790) ~[na:na]
	at java.base/java.net.Socket$SocketInputStream.implRead(Socket.java:983) ~[na:na]
	at java.base/java.net.Socket$SocketInputStream.read(Socket.java:970) ~[na:na]
	at org.postgresql.core.VisibleBufferedInputStream.readMore(VisibleBufferedInputStream.java:192) ~[postgresql-42.7.8.jar:42.7.8]
	at org.postgresql.core.VisibleBufferedInputStream.ensureBytes(VisibleBufferedInputStream.java:159) ~[postgresql-42.7.8.jar:42.7.8]
	at org.postgresql.core.VisibleBufferedInputStream.ensureBytes(VisibleBufferedInputStream.java:144) ~[postgresql-42.7.8.jar:42.7.8]
	at org.postgresql.core.VisibleBufferedInputStream.read(VisibleBufferedInputStream.java:76) ~[postgresql-42.7.8.jar:42.7.8]
	at org.postgresql.core.PGStream.receiveChar(PGStream.java:477) ~[postgresql-42.7.8.jar:42.7.8]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2175) ~[postgresql-42.7.8.jar:42.7.8]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372) ~[postgresql-42.7.8.jar:42.7.8]
	... 32 common frames omitted

2025-11-16T00:03:56.300+01:00 ERROR 83960 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: set client_min_messages = WARNING
2025-11-16T00:03:56.301+01:00 ERROR 83960 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: alter table if exists bill_of_material drop constraint if exists FKh3mapit7kch8jgnqhnmikdi96
2025-11-16T00:03:56.302+01:00 ERROR 83960 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: alter table if exists bill_of_material drop constraint if exists FKdildw5cr0jshwl1aapiigmaox
2025-11-16T00:03:56.302+01:00 ERROR 83960 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: alter table if exists customer_order drop constraint if exists FKf9abd30bhiqvugayxlpq8ryq9
2025-11-16T00:03:56.303+01:00 ERROR 83960 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: alter table if exists customer_order drop constraint if exists FKqodal2jjysnj6lsn46nvndcwr
2025-11-16T00:03:56.303+01:00 ERROR 83960 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: alter table if exists delivery drop constraint if exists FKejhj32q2h5614nx7scc41chql
2025-11-16T00:03:56.303+01:00 ERROR 83960 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: alter table if exists production_order drop constraint if exists FKkc38iyv9ioqhjwcdlrmfpecq3
2025-11-16T00:03:56.303+01:00 ERROR 83960 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: alter table if exists supplier_rawmaterial drop constraint if exists FKa1op2oq2gkuegitpjrb1dq1m
2025-11-16T00:03:56.304+01:00 ERROR 83960 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: alter table if exists supplier_rawmaterial drop constraint if exists FKmaapu5kf0vvskvcgffrjo9ilm
2025-11-16T00:03:56.305+01:00 ERROR 83960 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: alter table if exists supply_order_item drop constraint if exists FKam4tdmpi11f8i3v2b7jpou06y
2025-11-16T00:03:56.306+01:00 ERROR 83960 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: alter table if exists supply_order_item drop constraint if exists FKblu21960wpuoktwjnplsehd88
2025-11-16T00:03:56.306+01:00 ERROR 83960 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: alter table if exists supply_order drop constraint if exists FKhu1dkipx6f8w155arxs8uncv8
2025-11-16T00:03:56.306+01:00 ERROR 83960 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: drop table if exists bill_of_material cascade
2025-11-16T00:03:56.307+01:00 ERROR 83960 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: drop table if exists customer cascade
2025-11-16T00:03:56.307+01:00 ERROR 83960 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: drop table if exists customer_order cascade
2025-11-16T00:03:56.307+01:00 ERROR 83960 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: drop table if exists delivery cascade
2025-11-16T00:03:56.308+01:00 ERROR 83960 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: drop table if exists product cascade
2025-11-16T00:03:56.308+01:00 ERROR 83960 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: drop table if exists production_order cascade
2025-11-16T00:03:56.309+01:00 ERROR 83960 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: drop table if exists raw_material cascade
2025-11-16T00:03:56.309+01:00 ERROR 83960 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: drop table if exists supplier cascade
2025-11-16T00:03:56.309+01:00 ERROR 83960 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: drop table if exists supplier_rawmaterial cascade
2025-11-16T00:03:56.309+01:00 ERROR 83960 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: drop table if exists supply_order_item cascade
2025-11-16T00:03:56.312+01:00 ERROR 83960 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: drop table if exists supply_order cascade
2025-11-16T00:03:56.313+01:00 ERROR 83960 --- [supplychainx] [SpringApplicationShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000478: Unsuccessful: drop table if exists users cascade
2025-11-16T00:03:56.327+01:00  INFO 83960 --- [supplychainx] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-16T00:03:56.340+01:00  INFO 83960 --- [supplychainx] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
